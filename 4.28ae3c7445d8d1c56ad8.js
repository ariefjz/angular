(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{Iab2:function(t,e,a){var i,n;void 0===(n="function"==typeof(i=function(){"use strict";function e(t,e,a){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){c(i.response,e,a)},i.onerror=function(){console.error("could not download file")},i.send()}function a(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(a)}}var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,o=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(t,o,c){var l=n.URL||n.webkitURL,b=document.createElement("a");b.download=o=o||t.name||"download",b.rel="noopener","string"==typeof t?(b.href=t,b.origin===location.origin?i(b):a(b.href)?e(t,o,c):i(b,b.target="_blank")):(b.href=l.createObjectURL(t),setTimeout(function(){l.revokeObjectURL(b.href)},4e4),setTimeout(function(){i(b)},0))}:"msSaveOrOpenBlob"in navigator?function(t,n,o){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),n);else if(a(t))e(t,n,o);else{var c=document.createElement("a");c.href=t,c.target="_blank",setTimeout(function(){i(c)})}}:function(t,a,i,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),"string"==typeof t)return e(t,a,i);var l="application/octet-stream"===t.type,b=/constructor/i.test(n.HTMLElement)||n.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||l&&b||o)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var t=d.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=t:location=t,c=null},d.readAsDataURL(t)}else{var r=n.URL||n.webkitURL,u=r.createObjectURL(t);c?c.location=u:location.href=u,c=null,setTimeout(function(){r.revokeObjectURL(u)},4e4)}});n.saveAs=c.saveAs=c,t.exports=c})?i.apply(e,[]):i)||(t.exports=n)},jkDv:function(t,e,a){"use strict";a.r(e),a.d(e,"AdminModule",function(){return q});var i=a("0IaG"),n=a("fXoL"),o=a("H+bZ"),c=a("bTqV");let l=(()=>{class t{constructor(t,e,a){this.api=t,this.dialogRef=e,this.dialogData=a}ngOnInit(){console.log(this.dialogData)}onFileChange(t){t.target.files.length>0&&(this.selectedFile=t.target.files[0],console.log(this.selectedFile))}uploadFile(){let t=new FormData;t.append("file",this.selectedFile),this.loadingUpload=!0,this.api.upload(t).subscribe(t=>{this.updateProduct(t),console.log(t)},t=>{this.loadingUpload=!1,alert("Gagal mengunggah file")})}updateProduct(t){1==t.status?(this.updateBook(t),alert("File berhasil diunggah"),this.loadingUpload=!1,this.dialogRef.close()):alert(t.message)}updateBook(t){this.api.put("book/"+this.dialogData.id,{url:t.url}).subscribe(t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(o.a),n.Qb(i.g),n.Qb(i.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["app-file-uploader"]],decls:13,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"uk-flex","uk-flex-middle","uk-flex-center",2,"height","100px","outline","2px dashed #ccc","margin","10px",3,"click"],["type","file","id","file",2,"display","none",3,"change"],["fileInput",""],["mat-dialog-actions","","align","right"],["mat-button","","mat-dialog-close",""],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(t,e){if(1&t){const t=n.Xb();n.Wb(0,"h1",0),n.Ic(1,"Unggah File"),n.Vb(),n.Wb(2,"div",1),n.Wb(3,"div",2),n.hc("click",function(){return n.Ac(t),n.yc(7).click()}),n.Wb(4,"span"),n.Ic(5),n.Vb(),n.Vb(),n.Wb(6,"input",3,4),n.hc("change",function(t){return e.onFileChange(t)}),n.Vb(),n.Vb(),n.Wb(8,"div",5),n.Wb(9,"button",6),n.Ic(10,"Cancel"),n.Vb(),n.Wb(11,"button",7),n.hc("click",function(){return e.uploadFile()}),n.Ic(12),n.Vb(),n.Vb()}2&t&&(n.Db(5),n.Jc(e.selectedFile?e.selectedFile.name:"Pilih File"),n.Db(6),n.qc("disabled",e.loadingUpload),n.Db(1),n.Jc(e.loadingUpload?"Uploading..":"Upload"))},directives:[i.h,i.e,i.c,c.b,i.d],styles:[""]}),t})();var b=a("Iab2"),s=a("kmnG"),d=a("qFsG"),r=a("3Pt+");let u=(()=>{class t{constructor(t,e,a){this.dialogRef=t,this.data=e,this.api=a}ngOnInit(){}saveData(){this.loading=!0,console.log(this.data),null==this.data.id?this.api.post("books",this.data).subscribe(t=>{this.dialogRef.close(this.data),this.loading=!1},t=>{this.loading=!1,alert("Tidak dapat menyimpan data")}):this.api.put("books/"+this.data.id,this.data).subscribe(t=>{this.dialogRef.close(t),console.log(t),this.loading=!1},t=>{this.loading=!1,alert("Tidak dapat memperbarui data")})}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(i.g),n.Qb(i.a),n.Qb(o.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["app-detail"]],decls:32,vars:7,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","outline",2,"width","100%"],["matInput","",3,"ngModel","ngModelChange"],["matInput","","type","number",3,"ngModel","ngModelChange"],["mat-dialog-actions","","align","end"],["mat-button","","mat-dialog-close",""],["mat-flat-button","",3,"click"]],template:function(t,e){1&t&&(n.Wb(0,"h3",0),n.Ic(1," Detail Produk "),n.Vb(),n.Wb(2,"div",1),n.Wb(3,"mat-form-field",2),n.Wb(4,"mat-label"),n.Ic(5,"Judul"),n.Vb(),n.Wb(6,"input",3),n.hc("ngModelChange",function(t){return e.data.title=t}),n.Vb(),n.Vb(),n.Wb(7,"mat-form-field",2),n.Wb(8,"mat-label"),n.Ic(9,"Penulis"),n.Vb(),n.Wb(10,"input",3),n.hc("ngModelChange",function(t){return e.data.author=t}),n.Vb(),n.Vb(),n.Wb(11,"mat-form-field",2),n.Wb(12,"mat-label"),n.Ic(13,"Penerbit"),n.Vb(),n.Wb(14,"input",3),n.hc("ngModelChange",function(t){return e.data.publisher=t}),n.Vb(),n.Vb(),n.Wb(15,"mat-form-field",2),n.Wb(16,"mat-label"),n.Ic(17,"Tahun Terbit"),n.Vb(),n.Wb(18,"input",4),n.hc("ngModelChange",function(t){return e.data.year=t}),n.Vb(),n.Vb(),n.Wb(19,"mat-form-field",2),n.Wb(20,"mat-label"),n.Ic(21,"ISBN"),n.Vb(),n.Wb(22,"input",4),n.hc("ngModelChange",function(t){return e.data.isbn=t}),n.Vb(),n.Vb(),n.Wb(23,"mat-form-field",2),n.Wb(24,"mat-label"),n.Ic(25,"Harga"),n.Vb(),n.Wb(26,"input",4),n.hc("ngModelChange",function(t){return e.data.price=t}),n.Vb(),n.Vb(),n.Vb(),n.Wb(27,"div",5),n.Wb(28,"button",6),n.Ic(29,"Batal"),n.Vb(),n.Wb(30,"button",7),n.hc("click",function(){return e.saveData()}),n.Ic(31),n.Vb(),n.Vb()),2&t&&(n.Db(6),n.qc("ngModel",e.data.title),n.Db(4),n.qc("ngModel",e.data.author),n.Db(4),n.qc("ngModel",e.data.publisher),n.Db(4),n.qc("ngModel",e.data.year),n.Db(4),n.qc("ngModel",e.data.isbn),n.Db(4),n.qc("ngModel",e.data.price),n.Db(5),n.Kc(" ",e.loading?"Menyimpan..":"Simpan",""))},directives:[i.h,i.e,s.b,s.e,d.b,r.c,r.i,r.l,r.n,i.c,c.b,i.d],styles:[""]}),t})();var p=a("tyNb"),h=a("ofXK"),f=a("Xa2L"),g=a("Wp6s"),m=a("NFeN"),V=a("MutI");function W(t,e){1&t&&(n.Wb(0,"div",2),n.Rb(1,"mat-spinner"),n.Vb())}function k(t,e){1&t&&(n.Wb(0,"button",11),n.Wb(1,"mat-icon"),n.Ic(2,"download"),n.Vb(),n.Vb())}function v(t,e){if(1&t){const t=n.Xb();n.Wb(0,"div"),n.Wb(1,"button",12),n.hc("click",function(){n.Ac(t);const e=n.lc(),a=e.$implicit,i=e.index;return n.lc(2).deleteProduct(a.id,i)}),n.Ic(2,"Menghapus.."),n.Vb(),n.Vb()}if(2&t){const t=n.lc().index,e=n.lc(2);n.Db(1),n.qc("disabled",e.loadingDelete[t])}}function I(t,e){if(1&t){const t=n.Xb();n.Wb(0,"div"),n.Wb(1,"button",12),n.hc("click",function(){n.Ac(t);const e=n.lc(),a=e.$implicit,i=e.index;return n.lc(2).deleteProduct(a.id,i)}),n.Wb(2,"mat-icon",10),n.Ic(3,"delete"),n.Vb(),n.Vb(),n.Vb()}if(2&t){const t=n.lc().index,e=n.lc(2);n.Db(1),n.qc("disabled",e.loadingDelete[t])}}function w(t,e){if(1&t){const t=n.Xb();n.Wb(0,"tr"),n.Wb(1,"td"),n.Gc(2,k,3,0,"button",8),n.Vb(),n.Wb(3,"td"),n.Ic(4),n.Vb(),n.Wb(5,"td"),n.Ic(6),n.Vb(),n.Wb(7,"td"),n.Ic(8),n.Vb(),n.Wb(9,"td"),n.Ic(10),n.Vb(),n.Wb(11,"td"),n.Ic(12),n.Vb(),n.Wb(13,"td"),n.Ic(14),n.Vb(),n.Wb(15,"td"),n.Ic(16),n.Vb(),n.Wb(17,"td"),n.Wb(18,"button",9),n.hc("click",function(){n.Ac(t);const a=e.$implicit,i=e.index;return n.lc(2).productDetail(a,i)}),n.Wb(19,"mat-icon",10),n.Ic(20,"edit"),n.Vb(),n.Vb(),n.Vb(),n.Wb(21,"td"),n.Gc(22,v,3,1,"div",1),n.Gc(23,I,4,1,"div",1),n.Vb(),n.Wb(24,"td"),n.Wb(25,"button",9),n.hc("click",function(){n.Ac(t);const a=e.$implicit;return n.lc(2).uploadFile(a)}),n.Wb(26,"mat-icon",10),n.Ic(27,"upload"),n.Vb(),n.Vb(),n.Vb(),n.Vb()}if(2&t){const t=e.$implicit,a=e.index,i=n.lc(2);n.Db(2),n.qc("ngIf",""!=t.url),n.Db(2),n.Jc(a+1),n.Db(2),n.Jc(t.title),n.Db(2),n.Jc(t.author),n.Db(2),n.Jc(t.publisher),n.Db(2),n.Jc(t.year),n.Db(2),n.Jc(t.isbn),n.Db(2),n.Jc(t.price),n.Db(6),n.qc("ngIf",i.loadingDelete[a]),n.Db(1),n.qc("ngIf",!i.loadingDelete[a])}}function D(t,e){if(1&t){const t=n.Xb();n.Wb(0,"mat-card"),n.Wb(1,"mat-card-header"),n.Wb(2,"mat-card-title"),n.Ic(3,"Products"),n.Vb(),n.Vb(),n.Wb(4,"mat-card-content"),n.Wb(5,"div",3),n.Rb(6,"span",4),n.Wb(7,"button",5),n.hc("click",function(){return n.Ac(t),n.lc().productDetail({},-1)}),n.Ic(8,"Tambah Produk"),n.Vb(),n.Vb(),n.Wb(9,"table",6),n.Wb(10,"thead"),n.Rb(11,"th"),n.Wb(12,"th"),n.Ic(13,"No"),n.Vb(),n.Wb(14,"th"),n.Ic(15,"Judul"),n.Vb(),n.Wb(16,"th"),n.Ic(17,"Penulis"),n.Vb(),n.Wb(18,"th"),n.Ic(19,"Penerbit"),n.Vb(),n.Wb(20,"th"),n.Ic(21,"Tahun Terbit"),n.Vb(),n.Wb(22,"th"),n.Ic(23,"ISBN"),n.Vb(),n.Wb(24,"th"),n.Ic(25,"Harga"),n.Vb(),n.Vb(),n.Wb(26,"tbody"),n.Gc(27,w,28,10,"tr",7),n.Vb(),n.Vb(),n.Vb(),n.Vb()}if(2&t){const t=n.lc();n.Db(27),n.qc("ngForOf",t.books)}}let y=(()=>{class t{constructor(t,e,a){this.dialog=t,this.api=e,this.router=a,this.loadingDelete={},this.books=[]}ngOnInit(){this.getBooks()}checkLogin(){this.api.get("bookswithauth/status").subscribe(t=>{},t=>{this.router.navigate(["/login"])})}getBooks(){this.loading=!0,this.api.get("books").subscribe(t=>{this.books=t,this.loading=!1},t=>{this.loading=!1,alert("Silahkan reload halaman")})}productDetail(t,e){this.dialog.open(u,{width:"400px",data:t}).afterClosed().subscribe(a=>{a&&(-1==e?this.books.push(a):this.books[e]=t)})}deleteProduct(t,e){confirm("Yakin menghapus data "+t+" ?")&&(this.loadingDelete[e]=!0,this.api.delete("books/"+t).subscribe(t=>{this.books.splice(e,1),this.loadingDelete[e]=!1},t=>{this.loadingDelete[e]=!1,alert("Tidak dapat menghapus data")}))}uploadFile(t){this.dialog.open(l,{width:"400px",data:t}).afterClosed().subscribe(t=>{})}downloadFile(t){b.saveAs("http://api.sunhouse.co.id/bookstore/"+t.url)}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(i.b),n.Qb(o.a),n.Qb(p.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["app-products"]],decls:2,vars:2,consts:[["style","height: 300px","class","uk-flex uk-flex-center uk-flex-middle",4,"ngIf"],[4,"ngIf"],[1,"uk-flex","uk-flex-center","uk-flex-middle",2,"height","300px"],[1,"uk-flex"],[1,"uk-width-expand"],["mat-flat-button","","color","primary",3,"click"],[1,"uk-table","uk-table-middle","uk-table-divider"],[4,"ngFor","ngForOf"],["mat-icon-button","",4,"ngIf"],["mat-button","","color","primary",3,"click"],["matListIcon",""],["mat-icon-button",""],["mat-button","","color","warn",3,"disabled","click"]],template:function(t,e){1&t&&(n.Gc(0,W,2,0,"div",0),n.Gc(1,D,28,1,"mat-card",1)),2&t&&(n.qc("ngIf",e.loading),n.Db(1),n.qc("ngIf",!e.loading))},directives:[h.l,f.b,g.a,g.d,g.f,g.c,c.b,h.k,m.a,V.a],styles:[""]}),t})(),x=(()=>{class t{constructor(t,e){this.api=t,this.router=e}ngOnInit(){}checkLogin(){this.api.get("bookswithauth/status").subscribe(t=>{},t=>{this.router.navigate(["/login"])})}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(o.a),n.Qb(p.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(t,e){1&t&&(n.Wb(0,"p"),n.Ic(1,"dashboard works!"),n.Vb())},styles:[""]}),t})();var M=a("w55g"),T=a("/t3+"),F=a("XhcP"),L=a("FKr1");const R=[{path:"",component:(()=>{class t{constructor(t,e){this.api=t,this.router=e,this.mode="side"}ngOnInit(){}checkLogin(){this.api.get("bookswithauth/status").subscribe(t=>{},t=>{this.router.navigate(["/login"])})}logOut(){confirm("Yakin ingin keluar ?")&&(localStorage.removeItem("authToken"),this.router.navigate(["/home"]))}}return t.\u0275fac=function(e){return new(e||t)(n.Qb(o.a),n.Qb(p.a))},t.\u0275cmp=n.Kb({type:t,selectors:[["app-home-admin"]],decls:28,vars:9,consts:[["color","primary",1,"example-header"],["mat-icon-button","",3,"click"],[1,"uk-width-expand"],["mat-button","",3,"click"],[1,"admin-container"],["mode","side",1,"sidenav-left",3,"position","opened","fixedInViewport","fixedTopGap","fixedBottomGap"],["sidenav",""],["routerLink","dashboard"],["matListIcon",""],["matLine",""],["routerLink","products"],["mode","side",1,"example-sidenav",3,"position","fixedInViewport","fixedTopGap","fixedBottomGap"],[2,"padding","20px","background-color","#ccc"]],template:function(t,e){if(1&t){const t=n.Xb();n.Ub(0),n.Wb(1,"mat-toolbar",0),n.Wb(2,"button",1),n.hc("click",function(){return n.Ac(t),n.yc(12).toggle()}),n.Wb(3,"mat-icon"),n.Ic(4,"menu"),n.Vb(),n.Vb(),n.Wb(5,"span"),n.Ic(6,"Book Store"),n.Vb(),n.Rb(7,"div",2),n.Wb(8,"button",3),n.hc("click",function(){return e.logOut()}),n.Ic(9,"Logout"),n.Vb(),n.Vb(),n.Wb(10,"mat-sidenav-container",4),n.Wb(11,"mat-sidenav",5,6),n.Wb(13,"mat-nav-list"),n.Wb(14,"mat-list-item",7),n.Wb(15,"mat-icon",8),n.Ic(16,"dashboard"),n.Vb(),n.Wb(17,"h3",9),n.Ic(18,"Dashboard"),n.Vb(),n.Vb(),n.Wb(19,"mat-list-item",10),n.Wb(20,"mat-icon",8),n.Ic(21,"camera_enhance"),n.Vb(),n.Wb(22,"h3",9),n.Ic(23,"Product"),n.Vb(),n.Vb(),n.Vb(),n.Vb(),n.Rb(24,"mat-sidenav",11,6),n.Wb(26,"mat-sidenav-content",12),n.Rb(27,"router-outlet"),n.Vb(),n.Vb(),n.Tb()}2&t&&(n.Db(11),n.qc("position","start")("opened",!0)("fixedInViewport",!0)("fixedTopGap",70)("fixedBottomGap",0),n.Db(13),n.qc("position","end")("fixedInViewport",!0)("fixedTopGap",65)("fixedBottomGap",0))},directives:[T.a,c.b,m.a,F.b,F.a,V.d,V.b,p.b,V.a,L.j,F.c,p.e],styles:[""]}),t})(),children:[{path:"dashboard",component:x},{path:"products",component:y},{path:"",redirectTo:"/admin/dashboard",pathMatch:"full"}]}];let q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.Ob({type:t}),t.\u0275inj=n.Nb({imports:[[h.c,p.d.forChild(R),M.a,r.e]]}),t})()}}]);